{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from 'axios';\n\nexport async function pixabayAPI(searchQuery, perPage, currentPage) {\n    const API_KEY = '42531560-9f80359c55485b48c70b7f04a';\n    const URL = 'https://pixabay.com/api/';\n\n    const params = {\n        key: API_KEY,\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: perPage,\n        page: currentPage,\n    };\n\n    const res = await axios.get(URL, { params });\n    return res.data;\n}","function itemTemplate({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n    return `<a href=\"${largeImageURL}\" class=\"gallery-item\">\n                <img src=\"${webformatURL}\" alt=\"\" title=\"${tags}\">\n                <div class=\"info-block\">\n                    <div class=\"info-item likes\">\n                        <span>Likes</span>${likes}\n                    </div>\n                    <div class=\"info-item views\">\n                        <span>Views</span>${views}\n                    </div>\n                    <div class=\"info-item comments\">\n                        <span>Comments</span>${comments}\n                    </div>\n                    <div class=\"info-item downloads\">\n                        <span>Downloads</span>${downloads}\n                    </div>\n                </div>\n            </a>`;\n}\n\nfunction fullTemplate(elements) {\n    return elements.map(itemTemplate).join('');\n}\n\nexport function renderGallery(gallery, elements) {\n    const markup = fullTemplate(elements);\n    gallery.insertAdjacentHTML('beforeend', markup);\n}","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { pixabayAPI } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\n\nconst form = document.querySelector('.search-form');\nconst itemsWrap = document.querySelector('.items-wrap');\nconst gallery = document.querySelector('.gallery');\nconst loadMore = document.querySelector('.load-more');\n\nlet searchQuery;\nlet page;\nlet maxPage;\nconst PER_PAGE = 15;\nlet lightbox;\n\nform.addEventListener('submit', getSearchResult);\nloadMore.addEventListener('click', onLoadMoreClick);\n\nasync function getSearchResult(evt) {\n    evt.preventDefault();\n    \n    gallery.innerHTML = '';\n\n    page = 1;\n    maxPage = 1;\n    \n    loadMore.classList.add('hidden');\n\n    searchQuery = form.elements.searchField.value.trim();\n    if (searchQuery) {\n        \n        showLoader();\n\n        try {\n            const data = await pixabayAPI(searchQuery, PER_PAGE, page);\n\n            if (data['hits'].length !== 0) {\n                maxPage = Math.ceil(data.totalHits / PER_PAGE);\n\n                renderGallery(gallery, data['hits']);\n                createLightboxInstance();\n                \n                endSearchResultsMsg();\n            } else {\n                \n                const options = {\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    bgColor: '#EF4040',\n                    progressColor: '#B51B1B',\n                };\n                showSearchError(options);\n            }\n        } catch (err) {\n            console.log(err);\n        }\n\n        hideLoader();\n    }\n    showHideLoadBtn();\n    form.reset();\n}\n\nasync function onLoadMoreClick() {\n    page += 1;\n    \n    showLoader();\n\n    const data = await pixabayAPI(searchQuery, PER_PAGE, page);\n    renderGallery(gallery, data['hits']);\n\n    \n    lightbox.refresh();\n    \n    hideLoader();\n    \n    endSearchResultsMsg();\n    \n    showHideLoadBtn();\n    \n    scrollToElements();\n}\n\n\nfunction createLightboxInstance() {\n    lightbox = new SimpleLightbox('.gallery a');\n    lightbox.refresh();\n}\n\nfunction showLoader() {\n    itemsWrap.classList.add('loading');\n}\n\nfunction hideLoader() {\n    itemsWrap.classList.remove('loading');\n}\n\nfunction scrollToElements() {\n    const scrollHeight = gallery.firstElementChild.getBoundingClientRect().height * 2;\n\n    window.scrollBy({\n        behavior: 'smooth',\n        top: scrollHeight,\n    });\n}\n\n\nfunction showSearchError({ message, bgColor, progressColor }) {\n    iziToast.error({\n        message: message,\n        messageColor: '#fff',\n        backgroundColor: bgColor,\n        theme: 'dark',\n        position: 'topRight',\n        timeout: 3000,\n        progressBarColor: progressColor,\n        animateInside: false,\n        transitionIn: 'fadeIn',\n    });\n}\n\nfunction showHideLoadBtn() {\n    if (page >= maxPage) {\n        loadMore.classList.add('hidden');\n    } else {\n        loadMore.classList.remove('hidden');\n    }\n}\n\nfunction endSearchResultsMsg() {\n    if (page >= maxPage) {\n        const options = {\n            message: \"We're sorry, but you've reached the end of search results.\",\n            bgColor: '#2db4cf',\n            progressColor: '#40666e',\n        };\n\n        showSearchError(options);\n    }\n}"],"names":["pixabayAPI","searchQuery","perPage","currentPage","API_KEY","URL","params","axios","itemTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","fullTemplate","elements","renderGallery","gallery","markup","form","itemsWrap","loadMore","page","maxPage","PER_PAGE","lightbox","getSearchResult","onLoadMoreClick","evt","showLoader","data","createLightboxInstance","endSearchResultsMsg","showSearchError","err","hideLoader","showHideLoadBtn","scrollToElements","SimpleLightbox","scrollHeight","message","bgColor","progressColor","iziToast"],"mappings":"owBAGO,eAAeA,EAAWC,EAAaC,EAASC,EAAa,CAChE,MAAMC,EAAU,qCACVC,EAAM,2BAENC,EAAS,CACX,IAAKF,EACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUC,EACV,KAAMC,CACd,EAGI,OADY,MAAMI,EAAM,IAAIF,EAAK,CAAE,OAAAC,CAAM,CAAE,GAChC,IACf,CCnBA,SAASE,EAAa,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,GAAa,CAC5F,MAAO,YAAYL,CAAa;AAAA,4BACRD,CAAY,mBAAmBE,CAAI;AAAA;AAAA;AAAA,4CAGnBC,CAAK;AAAA;AAAA;AAAA,4CAGLC,CAAK;AAAA;AAAA;AAAA,+CAGFC,CAAQ;AAAA;AAAA;AAAA,gDAGPC,CAAS;AAAA;AAAA;AAAA,iBAIzD,CAEA,SAASC,EAAaC,EAAU,CAC5B,OAAOA,EAAS,IAAIT,CAAY,EAAE,KAAK,EAAE,CAC7C,CAEO,SAASU,EAAcC,EAASF,EAAU,CAC7C,MAAMG,EAASJ,EAAaC,CAAQ,EACpCE,EAAQ,mBAAmB,YAAaC,CAAM,CAClD,CClBA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAY,SAAS,cAAc,aAAa,EAChDH,EAAU,SAAS,cAAc,UAAU,EAC3CI,EAAW,SAAS,cAAc,YAAY,EAEpD,IAAItB,EACAuB,EACAC,EACJ,MAAMC,EAAW,GACjB,IAAIC,EAEJN,EAAK,iBAAiB,SAAUO,CAAe,EAC/CL,EAAS,iBAAiB,QAASM,CAAe,EAElD,eAAeD,EAAgBE,EAAK,CAWhC,GAVAA,EAAI,eAAc,EAElBX,EAAQ,UAAY,GAEpBK,EAAO,EACPC,EAAU,EAEVF,EAAS,UAAU,IAAI,QAAQ,EAE/BtB,EAAcoB,EAAK,SAAS,YAAY,MAAM,KAAI,EAC9CpB,EAAa,CAEb8B,IAEA,GAAI,CACA,MAAMC,EAAO,MAAMhC,EAAWC,EAAayB,EAAUF,CAAI,EAErDQ,EAAK,KAAQ,SAAW,GACxBP,EAAU,KAAK,KAAKO,EAAK,UAAYN,CAAQ,EAE7CR,EAAcC,EAASa,EAAK,IAAO,EACnCC,IAEAC,KAQAC,EALgB,CACZ,QAAS,2EACT,QAAS,UACT,cAAe,SACnC,CACuC,CAE9B,OAAQC,EAAK,CACV,QAAQ,IAAIA,CAAG,CAClB,CAEDC,GACH,CACDC,IACAjB,EAAK,MAAK,CACd,CAEA,eAAeQ,GAAkB,CAC7BL,GAAQ,EAERO,IAEA,MAAMC,EAAO,MAAMhC,EAAWC,EAAayB,EAAUF,CAAI,EACzDN,EAAcC,EAASa,EAAK,IAAO,EAGnCL,EAAS,QAAO,EAEhBU,IAEAH,IAEAI,IAEAC,GACJ,CAGA,SAASN,GAAyB,CAC9BN,EAAW,IAAIa,EAAe,YAAY,EAC1Cb,EAAS,QAAO,CACpB,CAEA,SAASI,GAAa,CAClBT,EAAU,UAAU,IAAI,SAAS,CACrC,CAEA,SAASe,GAAa,CAClBf,EAAU,UAAU,OAAO,SAAS,CACxC,CAEA,SAASiB,GAAmB,CACxB,MAAME,EAAetB,EAAQ,kBAAkB,sBAAuB,EAAC,OAAS,EAEhF,OAAO,SAAS,CACZ,SAAU,SACV,IAAKsB,CACb,CAAK,CACL,CAGA,SAASN,EAAgB,CAAE,QAAAO,EAAS,QAAAC,EAAS,cAAAC,CAAa,EAAI,CAC1DC,EAAS,MAAM,CACX,QAASH,EACT,aAAc,OACd,gBAAiBC,EACjB,MAAO,OACP,SAAU,WACV,QAAS,IACT,iBAAkBC,EAClB,cAAe,GACf,aAAc,QACtB,CAAK,CACL,CAEA,SAASN,GAAkB,CACnBd,GAAQC,EACRF,EAAS,UAAU,IAAI,QAAQ,EAE/BA,EAAS,UAAU,OAAO,QAAQ,CAE1C,CAEA,SAASW,GAAsB,CACvBV,GAAQC,GAORU,EANgB,CACZ,QAAS,6DACT,QAAS,UACT,cAAe,SAC3B,CAE+B,CAE/B"}